---
layout: default
title: JK|Spatial Analysis
keywords: data visualization, shiny, R, CRAN, statistics
---

<div id="shinyheader" class="outer">
    <h3 class="page_title">Spatial Analysis</h3>
</div>

<div class="container-fluid">
    <div class="row">
        <div id="spatialparagraph1" class="col-md-6">
            <p style="padding-top:34px;">Users of ArcGIS know that it has its origins in Python, and that many analyses can still be scripted in Python and run using the integrated development enviroment (IDLE, in ArcGIS parlance) that ships with every installation. I never went deep enough with ArcGIS to actually use the IDLE, but I am aware of its existence.</p>
            <p>What users of R know is that several high quality spatial analysis packages exist, with excellent documentation both in the manual and through the Stack Exchange community. I am R-centric, so I think it may go as far as duplicating the functionality of ArcGIS -- but there is no question that it takes a lot more thought and experience to use.</p>
            <p>For example, until I started using R for spatial analysis I did not know that there is a standard way to specify coordinate reference systems: <a href="http://www.epsg.org/">the EPSG string</a>. Also, the first time someone sent me a file geodatabase it took me about an hour to install the ESRI driver to read it. I understand it may be native in Windows installations of GDAL, and may still need manual installation in Linux (I'm a dedicated Ubuntu user). If you need to install it, start with the driver documentation at <a href="http://www.gdal.org/drv_filegdb.html">http://www.gdal.org/drv_filegdb.html</a>.</p>
            <p>Using ArcGIS is hands-down the easiest way to make mapping imagery, but creating the imagery is only a fraction of the work. I recently made this simple map of a project area in R and I probably spent as much time sorting through and testing the possible features to include as I did creating the actual image. Ultimately I rejected basemap imagery such as NWI images and areas of special environmental concern.</p>
        </div> 
       
        <div class="col-md-6">
            <img class="imgnatural" style="max-width:95%;" src="/assets/images_sm/spatial/map.png">
        </div>    
    </div>
    
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <p>A huge advantage to working with spatial data in R, or Python, or in any scripting platform outside of ArcGIS, is that data are not typically ready to map without some pre-processing -- and the processing will usually be done in a scripting platform anyway. Here is a simple example: air temperature is typically measured at points across the landscape, but everyone knows that air exists between those points and it must have a measureable temperature everywhere. To present air temperature data such as this we could avoid the issue completely and place it in a table with a row for each weather station, but that is boring to consume and fails to acknowledge the physical truths of the universe. It is better to attempt to interpolate between the points, which is where the scripting language comes in. Here is an example of a map that does exactly that for the state of Vermont. The first image shows the locations of the monitoring stations on the digital elevation model, the second is the interpolated temperature with isotherms rendered in a heatcolor gradient and with county lines added for reference. <a href="{{BASE_PATH}}/2017/11/15/interpolating-points-to-raster-in-r" target="_blank">See a post on making this map.</a></p>
        </div>
    </div>
    
    <div style="clear:both;" class="row">
        <div class="col-md-6 ">
            <img class="imgright" style="max-width:95%;" src="/assets/images_sm/spatial/unnamed-chunk-6-1.png">
        </div>
        <div class="col-md-6 ">
            <img class="imgleft" style="max-width:95%;" src="/assets/images_sm/spatial/unnamed-chunk-11-1.png">
        </div>
    </div>
    
    <div style="clear:both;" class="row">
        <div class="col-md-6 col-md-offset-3">
            <p>Another advantage to working with spatial data in a scripting language rather than ArcGIS is that it is simple to make what ArcGIS calls data models, which are used to batch-process multiple maps. Here are three similar maps created using the same script as the above map, but pointing it to new data for each iteration.</p>
        </div>
        <img style="max-width:95%;max-height:516px;display:block;margin:auto;" src="/assets/images_sm/spatial/temphoriz_counties.png">
        
        <div class="col-md-4 col-md-offset-2">
            <p>In a similar way it is also possible to combine and automate data collection and mapping processes to present up-to-date information. In some cases this can be done interactively in a dynamic server-side application, and in other cases it may be for a static report to convey a snapshot of time. That is the case with the map of 2015 home sale prices, which were scraped from the web and mapped in a single script. I forgot to note that the numbers in the towns on the map  indicate how many homes were for sale at the time the data were grabbed. <a href="{{BASE_PATH}}/2016/05/01/mapping-with-base-graphics-in-r" target="_blank">See a post on making this map.</a></p>
        </div>
        <div class="col-md-6">
            <img class="imgnatural" style="max-width:95%;" src="/assets/images_sm/spatial/unnamed-chunk-10-1.png">
        </div>
    </div>
</div>

























